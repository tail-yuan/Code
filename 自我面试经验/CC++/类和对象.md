### 多态

```C++
class Base
{
	virtual void m()
	{
		cout << "from base" << endl;
	}
public:
	virtual  ~Base()
	{
		m();
	}
	void A()//D*
	{
		m();
	}
};
class D : public Base
{
public:
	void m()
	{
		cout << "from D" << endl;
	}
	~D()
	{
		m();
	}
};
int main()
{
	Base* p = new D();
	p->A();//D*
	delete p;
	//from D p是D对象的指针,所以在发生多态时调用D的m()函数
	//from D 析构时,也是发生多态实现两个都析构掉.顺序是先析构子类D再析构Base类
	//	      如果析构不构成多态,只会释放Base(),D没释放内存泄漏.因为不构成多态
	//       p本来就是人家基类的指针,自然调用自己的析构函数
	//from base
	return 0;
}

```



### 一、 面向对象和面向过程的认识

C语言是面向过程的，关注的是过程，分析出求解问题的步骤，通过函数调用逐渐解决问题。

C++是面向对象的，关注的是对象，将一件事情拆分为不同的对象，靠对象之间的交互完成。

### 二、类

1. #### 类的定义

   C语言中结构体只能定义变量，C++中，结构体内不仅可以定义变量还可以定义函数，对于结构体的定义，C++中更喜欢用class来替代。

   因为C++需要兼容C语言，所以C++中struct可以当成结构体去使用，另外C++中struct还可以用来定义类，和class是定义类是一样的。

   * 那么C++中struct和class二者有什么区别吗？

     class默认访问权限是private，struct是public。

```C++
class className//自定义类的名字
{
	// 类体：由成员函数和成员变量组成
}; // 一定要注意后面的分号
```

class是定义类的关键字，{}类体中的数据成为类的属性或者成员变量，类中的函数成为类的方法或者成员函数。类的所有成员都在类的作用域中，在类外面的定义成员需要指明成员属于那一个类域，用 `::`。比如A类中的a成员函数，`A::a`

* ##### 类的两种定义方式

  1. 声明和定义全部放在类体中，需要注意：成员函数如果在类中定义，编译器可能会将其当成内联函数处理，可理解为类内定义的函数都是内联函数。
  2. 声明放在项目的.h文件中，定义实现在.cpp文件中（推荐）。

2. #### 类的实例化

   **：用类类型创建对象的过程，称为类的实例化。**

   > 1. 类只是一个模型一样的东西，限定了类有哪些成员，定义出一个类并没有分配实际的内存空间来存储它
   > 2. 一个类可以实例化出多个对象，实例化出的对象 占用实际的物理空间，存储类成员变量 
   > 3. 做个比方，类实例化出对象就像现实中使用建筑设计图建造出房子，类就像是设计图，只设计出需要什 么东西，但是并没有实体的建筑存在，同样类也只是一个设计，实例化出的对象才能实际存储数据，占用物理空间 。

3. #### 三个 访问限定符

   - C++实现封装的方式：

     > 用类将对象的属性和方法结合在一块，让对象更加完善，通过访问权限选择性的将其接口提供给外部的用户使用。

   - 那么靠什么实现权限的选择性呢？-->**三个访问限定符**：public private protected

   > 【访问限定符的说明】
   >
   > 1. public修饰的成员在类的外面可以直接被访问。
   > 2. protected和private修饰的成员在类的外面不能被访问。
   > 3. 访问限定符的作用范围就是从一个访问限定符到下一个之间的区域。

   * 那么有无可以突破这种封装的方式呢？--友元（后面揭晓）

4. #### 封装

   面向对象的三大特性：封装、继承、多态。

   封装的定义：将数据和操作数据的方法进行有机结合，**隐藏**对象的属性和实现细节，仅对外公开接口来和对象进行交互。本质上就是一种管理，将不想让他人随意读取的进行封闭保护private和protected，提供特定的方式也就是接口函数进行一个层次的保护。
