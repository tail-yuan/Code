### recv和send函数返回值

在**非阻塞模式**下，`send` 和 `recv` 函数在完成操作后的返回值有一些特殊的含义。这些返回值可以提供关于操作状态的信息，而不是阻塞等待。在非阻塞模式下，它们的返回值可能如下：

1. **`send` 返回值：**
   - 如果成功发送数据，`send` 返回**已发送的字节数**。

   - 如果发送缓冲区已满而无法发送数据，`send` 返回 `-1`，并且 `errno` 设置为 `EAGAIN` 或 `EWOULDBLOCK`。

   - 如果发生其他错误，`send` 返回 `-1`，并且 `errno` 设置为适当的错误代码，比如连接断开等。

2. **`recv` 返回值：**

   - 如果成功接收数据，`recv` 返回**已接收的字节数**。

   - 如果接收缓冲区为空而无法接收数据，`recv` 返回 `0`，表示连接已关闭。

   - 如果没有数据可用，`recv` 返回 `-1`，并且 `errno` 设置为 `EAGAIN` 或 `EWOULDBLOCK`。

   - 如果发生其他错误，`recv` 返回 `-1`，并且 `errno` 设置为适当的错误代码，比如连接断开等。

需要注意的是，在非阻塞模式下，函数的返回值**可以指示是否成功执行操作**，但不能保证一定能读取或发送指定数量的数据。因此，在处理非阻塞 `send` 和 `recv` 的返回值时，你可能需要结合其他处理逻辑，比如**循环调用**这些函数以确保完成操作。